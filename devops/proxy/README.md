Nginx load balancer is used to proxy all of the request going to each of the services under Modern Delivery project. SSL with TLS v1.2 is used to secure the web site and to maintain compatibility with Identity Aware Proxy that is used in Dogpony application.

LetsEncrypt SSL certificate is used for SSL in Modern Delivery application. The certificate is set to expire every 90 days and notification will be sent by LetsEncrypt.

*.kpmgdemos.com is the certificate used in this project.

Steps to renew certificate
1. Generate certificate signing request (CSR) with command 'openssl req -new -newkey rsa:2048 -nodes -keyout wildcard-kpmgdemos.key -out wildcard-kpmgdemos.csr'
2. Open the output file and split the file into CSR and private key file
3. Go to www.sslforfree.com
4. Put '*.kpmgdemos.com' into the form on the website and generate SSL certificate
5. Validate the domain by selecting 'Manually Validate Domain' and it will generate TXT
6. Go to Google Domain (domains.google.com) and go to DNS
7. Add a custom resource record with the hostname (generated by the website), set the type to 'Txt', set duration to 1m, and put in the value (generated by website)
8. Wait for 3-5 minutes for the DNS to validate. To check, use the verify URL provided by sslforfree.com web site
9. After validation is successful, download copy and paste the certificate into a text file (wildcard-kpmgdemos.crt) and store in a secure location
10. Put the private key and public key into '/demo-squad/demo/modern-delivery/devops/proxy/' directory
11. Redeploy the Proxy service


NOTE: Do NOT check private key and public key into BitBucket. 